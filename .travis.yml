language: node_js

node_js:
  - "12"

install:
  - npm install
  - npm install serverless --g
  - ln -s /usr/bin/nodejs /usr/bin/node
  - chmod +x ./scripts/deploy_travis.sh
  - chmod +x ./scripts/invalidate-cloudfront-cache.js

script:
  - npm run deploy:travis

after_script:
  - npm run invalidate-cloudfront-cache

branches:
  only:
  - master
  - development

notifications:
  email:
    on_success: never
    on_failure: always
